<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Бронирование номеров</title>
    <link rel="stylesheet" href="./css/style.css">
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script src="./js/script.js"></script>
<link rel="stylesheet" href="./css/bootstrap.min.css">
<script src="./js/bootstrap.min.js"></script>
    <style>
           body {

            background: linear-gradient(133deg, rgba(177, 145, 69, 0.8262954840139181) 4%, rgba(209, 142, 98, 0.7590685932576156) 45%, rgba(216, 192, 170, 0.7450629910167192) 98%), url('./img/haha.png');
    background-size: cover;
    background-attachment: fixed;
    color: rgb(0, 0, 0);
    text-shadow: 1px 1px 1px #afafaf;
    background-position: center;}
</style>
</head>
<body>
    <div class="mynav1">
        <nav class="navbar navbar-expand-lg ">
            <div class="container-fluid">
              <a class="navbar-brand" href="index.html">
                <img src="./img/logo.png" alt="" width="70" height="70" style="border-radius: 100px; border: 3px solid rgba(68, 43, 20, 0.308);">
              </a> 
              <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarText" aria-controls="navbarText" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
              </button>
              <div class="collapse navbar-collapse" id="navbarText">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                  <li class="nav-item">
                    <a class="nav-link active text-white" aria-current="page" href="#bron">О Нас</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link text-white" href="index.html#yslygi">Услуги</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link text-white" href="index.html#numbers">Номера</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link text-white" href="index.html#contacts">Контакты</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link text-white" href="index.html#commentaries">Отзывы</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link text-white" href="index.html">Вернуться на главную</a>
                  </li>
                </ul>
    
              </div>
            </div>
          </nav></div>
        <div class="container">
            <h1 class="text-center text-dark">Бронирование номеров</h1>
            <div class="tab-content text-center">
                <div id="rooms" class="tab-pane active">
                    <h2>Выбор номера</h2>
                    <div class="form-group">
                        <label for="room-type">Тип номера:</label>
                        <select id="room-type" class="form-control text-center" onchange="calculateTotalPrice()">
                            <optgroup label="Эконом">
                                <option value="economy-room1" data-price="5000">Двухместный (Стандартный двухместный номер «Пента» с 1 кроватью) 5000р.</option>
                                <option value="economy-room2" data-price="6000">Двухместный (Стандартный номер Penta с 2 отдельными кроватями). 6000р.</option>
                                <option value="economy-room3" data-price="70">Двухместный (Номер «Пента Плюс»). 7000р.</option>
                            </optgroup>
                            <optgroup label="Стандарт">
                                <option value="standard-room1" data-price="9000">Двухместный (Премиум Делюкс) 9000р.</option>
                                <option value="standard-room2" data-price="10000">Двухместный (Делюкс с одной большой кроватью) 10000р.</option>
                                <option value="standard-room3" data-price="12000">Двухместный (Делюкс с двумя раздельными кроватями) 11000р.</option>
                            </optgroup>
                            <optgroup label="Люкс">
                                <option value="luxury-room1" data-price="14000">De Luxe (С 1 кроватью размера «king-size») 14000р.</option>
                                <option value="luxury-room2" data-price="16000">Сьюит (Полулюкс) 16000р.</option>
                                <option value="luxury-room3" data-price="20000">Люкс (Премьер Люкс) 20000р.</option>
                            </optgroup>
                        </select>
                    </div>
                </div>
            </div>
<div id="services" class="tab-pane">
    <h2>Выбор услуг</h2>
    <div class="form-group">
        <label>Выберите услуги:</label>
        <div class="container">
            <div class="form-check">
                <input class="form-check-input" type="checkbox" name="services" id="breakfast" value="breakfast" data-price="1650" onchange="calculateTotalPrice()">
                <label class="form-check-label" for="breakfast">Завтрак (1650р.)</label>
            </div>
            
            <div class="form-check">
                <input class="form-check-input" type="checkbox" name="services" id="parking" value="parking" data-price="500" onchange="calculateTotalPrice()">
                <label class="form-check-label" for="parking">Парковка (500р.)</label>
            </div>
            
            <div class="form-check">
                <input class="form-check-input" type="checkbox" name="services" id="spa" value="spa" data-price="2500" onchange="calculateTotalPrice()">
                <label class="form-check-label" for="spa">СПА (2500р.)</label>
            </div>
            
            <div class="form-check">
                <input class="form-check-input" type="checkbox" name="services" id="gym" value="gym" data-price="1700" onchange="calculateTotalPrice()">
                <label class="form-check-label" for="gym">Фитнес-зал (1700р.)</label>
            </div>
        </div>
    </div>
</div>           
                <div class="form-group mt-4">
                    <label for="check-in" class="form-label">Дата заезда</label>
                    <input type="date" class="form-control" id="check-in" onchange="calculateTotalPrice()" required>
                </div>
                <div class="form-group">
                    <label for="check-out" class="form-label">Дата выезда</label>
                    <input type="date" class="form-control" id="check-out" onchange="calculateTotalPrice()" required>
                </div>
                <div class="form-group">
                    <label for="guests" class="form-label">Количество гостей</label>
                    <input type="number" class="form-control" id="guests" onchange="calculateTotalPrice()" required>
                </div>
                <div class="form-group mt-4">
                    <label for="full-name" class="form-label">ФИО</label>
                    <input type="text" class="form-control" id="full-name" required>
                </div>
                <div class="form-group">
                    <label for="email" class="form-label">Эл. почта:</label>
                    <input type="email" class="form-control" id="email" required>
                </div>
                <div class="form-group">
                    <label for="phone" class="form-label">Номер телефона:</label>
                    <input type="tel" class="form-control" id="phone" required>
                </div>
    
                <div class="btn-group mt-4 col-12" style="padding: 1rem; ">
                    <button type="button" class="btn btn-outline-dark" style="border-radius: 6px;" onclick="validateAndSubmit()" id="booking-submit-button"><span id="total-price"></span></button>
                    <div class="loading-overlay" id="loading-overlay" style="display: none;">
                        <div class="spinner-border text-light" role="status"></div>
                        <div>Пожалуйста, подождите...</div>
                    </div>
                </div>
                
                
            </div>
    <script>
        function validateAndSubmit() {
    const roomType = document.getElementById('room-type').value;
    const checkInDate = document.getElementById('check-in').value;
    const checkOutDate = document.getElementById('check-out').value;
    const guestsCount = document.getElementById('guests').value;
    
    if (!roomType || !checkInDate || !checkOutDate || !guestsCount) {
        alert('Пожалуйста, заполните все поля перед подтверждением бронирования.');
    } else {
        submitBookingAndShowLoadingScreen();
    }
}
        function submitBookingAndShowLoadingScreen() {
    submitBooking();
    showLoadingScreen(3000); // Укажите необходимое время загрузки здесь
}

function showLoadingScreen(loadingTime) {
    document.getElementById('loading-overlay').style.display = 'block';

    setTimeout(function() {
        document.getElementById('loading-overlay').style.display = 'none';
        window.location.href = 'thankyou.html';
    }, loadingTime);
}
function calculateTotalPrice() {
    const roomPrice = parseFloat(document.getElementById('room-type').selectedOptions[0].dataset.price);
    
    let servicesPrice = 0;
    const selectedServices = document.querySelectorAll('input[name="services"]:checked');
    selectedServices.forEach(service => {
        servicesPrice += parseFloat(service.dataset.price);
    });
    
    const checkInDate = new Date(document.getElementById('check-in').value);
    const checkOutDate = new Date(document.getElementById('check-out').value); 
    
    const currentDate = new Date();
    
    if (checkInDate < currentDate || checkOutDate < currentDate) {
        alert('Пожалуйста, выберите будущую дату заезда и отъезда.');
        return;
    }
    
    const stayDuration = Math.max(1, Math.round((checkOutDate - checkInDate) / (1000 * 60 * 60 * 24)));
    
    let guestsCount = +document.getElementById('guests').value || 1;
    const extraGuests = Math.max(0, guestsCount - 3); 
    const extraGuestsFee = extraGuests * 3;
    
    const totalPrice = stayDuration * (roomPrice + servicesPrice) + extraGuestsFee;
    
    document.getElementById('total-price').textContent = `Забронировать. Цена: ${isNaN(totalPrice) ? '0' : totalPrice}руб.`;
}
    
        function submitBooking() {
            const roomType = document.getElementById('room-type').value;
            const services = Array.from(document.querySelectorAll('input[name="services"]:checked')).map(service => service.value);
            const checkInDate = document.getElementById('check-in').value;
            const checkOutDate = document.getElementById('check-out').value;
            const guestsCount = document.getElementById('guests').value;
    
            const redirectUrl = `thankyou.html?checkIn=${checkInDate}&checkOut=${checkOutDate}&guests=${guestsCount}&room=${roomType}&services=${services}`;
            window.location.href = redirectUrl;
        }
    
        document.getElementById('room-type').addEventListener('change', calculateTotalPrice);
        document.querySelectorAll('input[name="services"]').forEach(service => {
            service.addEventListener('change', calculateTotalPrice);
        });
    
        calculateTotalPrice(); 
            function submitBooking() {
                const roomType = document.getElementById('room-type').value;
                const services = Array.from(document.querySelectorAll('input[name="services"]:checked')).map(service => service.value);
                const checkInDate = document.getElementById('check-in').value;
                const checkOutDate = document.getElementById('check-out').value;
                const guestsCount = document.getElementById('guests').value;
    

                const redirectUrl = `thankyou.html?checkIn=${checkInDate}&checkOut=${checkOutDate}&guests=${guestsCount}&room=${roomType}&services=${services}`;
                window.location.href = redirectUrl;
            }
    

            const urlParams = new URLSearchParams(window.location.search);
            const checkInDateParam = urlParams.get('checkIn');
            const checkOutDateParam = urlParams.get('checkOut');
            const guestsCountParam = urlParams.get('guests');
    
            if (checkInDateParam && checkOutDateParam && guestsCountParam) {
                document.getElementById('check-in').value = checkInDateParam;
                document.getElementById('check-out').value = checkOutDateParam;
                document.getElementById('guests').value = guestsCountParam;
            }
            const goBackButton = document.getElementById('goBackButton');

goBackButton.addEventListener('click', () => {
    window.location.href = 'index.html';
});
</script>
</body>
</html>